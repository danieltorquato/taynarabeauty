<ion-content fullscreen>
  <div class="container">
    <!-- Header para usuÃ¡rios logados - mostra perfil do usuÃ¡rio -->
    @if (isAuthenticated) {
      <div class="user-header">
      <div class="profile-section">
        <div class="user-photo" [style.background-image]="currentUser?.foto ? 'url(' + currentUser.foto + ')' : 'none'">
          @if (!currentUser?.foto) {
            <span class="avatar-initial">{{ getInitials(currentUser?.name) }}</span>
          }
        </div>
        <div class="profile-info">
          <h1>{{ currentUser?.name }}</h1>
          <p>{{ currentUser?.role | titlecase }}</p>
          <span class="welcome-text">Bem-vindo(a) ao Taynara Beauty</span>
        </div>
      </div>
      <ion-button fill="clear" size="small" class="logout-btn" (click)="logout()">
        <ion-icon name="log-out-outline"></ion-icon>
      </ion-button>
    </div>
  }

  <!-- Header para usuÃ¡rios nÃ£o logados - mostra Taynara Beauty -->
  @if (!isAuthenticated) {
    <div class="brand-header">
      <div class="profile-section">
        <img src="assets/img/logo.jpg" alt="Taynara Beauty" class="brand-photo">
        <div class="profile-info">
          <h1>Taynara Beauty Casagrande</h1>
          <p>Agende seus procedimentos com facilidade</p>
          <span class="brand-subtitle">Realce sua beleza natural</span>
        </div>
      </div>
      <ion-button fill="outline" size="small" class="login-btn" routerLink="/login">
        <ion-icon name="log-in-outline"></ion-icon>
        Entrar
      </ion-button>
    </div>
  }

  <!-- Switch Modo Admin/Profissional (somente para admin) -->
  <div class="mode-switch" *ngIf="isAuthenticated && currentUser?.role === 'admin'">
    <ion-card>
      <ion-card-content>
        <div class="switch-container">
          <span class="switch-label">ğŸ›ï¸ Modo de VisualizaÃ§Ã£o:</span>
          <div class="switch-options">
            <ion-button
              [fill]="viewMode === 'admin' ? 'solid' : 'outline'"
              [color]="viewMode === 'admin' ? 'primary' : 'medium'"
              size="small"
              (click)="setViewMode('admin')">
              ğŸ‘‘ Admin
            </ion-button>
            <ion-button
              [fill]="viewMode === 'profissional' ? 'solid' : 'outline'"
              [color]="viewMode === 'profissional' ? 'success' : 'medium'"
              size="small"
              (click)="setViewMode('profissional')">
              ğŸ’¼ Profissional
            </ion-button>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>


  <!-- Interface para Clientes -->
  <ion-grid *ngIf="isAuthenticated && currentUser?.role === 'cliente'">
    <ion-row>
      <ion-col size="12" size-md="6">
        <ion-card class="custom-card" routerLink="/agendamentos" [queryParams]="{ service: 'cilios' }">
          <img src="assets/img/cilios.jpg" alt="Alongamento de CÃ­lios" class="img-card"/>
          <ion-card-header>
            <ion-card-title>ğŸ‘ï¸ Alongamento de CÃ­lios</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Realce seu olhar com tÃ©cnicas modernas e personalizadas.
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12" size-md="6">
        <ion-card class="custom-card" routerLink="/agendamentos" [queryParams]="{ service: 'labios' }">
          <img src="assets/img/labios.jpg" alt="Design de LÃ¡bios" class="img-card"/>
          <ion-card-header>
            <ion-card-title>ğŸ’„ Design de LÃ¡bios</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Procedimentos para realÃ§ar sua beleza natural com elegÃ¢ncia.
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12">
        <ion-card class="custom-card" routerLink="/meus-agendamentos">
          <ion-card-header>
            <ion-card-title>ğŸ“… Meus Agendamentos</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Visualize e gerencie seus agendamentos.
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Interface para Profissionais -->
  <ion-grid *ngIf="isAuthenticated && (currentUser?.role === 'profissional' || (currentUser?.role === 'admin' && viewMode === 'profissional'))">
    <ion-row>
      <ion-col size="12">
        <h2 class="section-title">Meu Dia de Trabalho</h2>
      </ion-col>

      <ion-col size="12" size-md="4">
        <ion-card class="stats-card">
          <ion-card-header>
            <ion-card-title>ğŸ“Š Hoje</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="stat-number">{{ agendamentosHoje }}</div>
            <div class="stat-label">Agendamentos</div>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12" size-md="4">
        <ion-card class="stats-card">
          <ion-card-header>
            <ion-card-title>â° PrÃ³ximo</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="stat-number">{{ proximoAgendamento?.hora || '--:--' }}</div>
            <div class="stat-label">{{ proximoAgendamento?.cliente || 'Nenhum' }}</div>
            <div class="stat-detail">{{ proximoAgendamento?.procedimento || '' }}</div>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12" size-md="4">
        <ion-card class="stats-card" routerLink="/meus-agendamentos">
          <ion-card-header>
            <ion-card-title>ğŸ“‹ Gerenciar</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="stat-label">Ver todos os agendamentos</div>
            <ion-button fill="clear" size="small">Acessar â†’</ion-button>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Interface para Admin/RecepÃ§Ã£o -->
  <ion-grid *ngIf="isAuthenticated && ((currentUser?.role === 'admin' && viewMode === 'admin') || currentUser?.role === 'recepcao')">
    <ion-row>
      <ion-col size="12">
        <h2 class="section-title">Painel Administrativo</h2>
      </ion-col>

      <ion-col size="12" size-md="6">
        <ion-card class="admin-card" routerLink="/dashboard-admin">
          <ion-card-header>
            <ion-card-title>ğŸ“Š Dashboard</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Visualize estatÃ­sticas e gerencie agendamentos.
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12" size-md="6">
        <ion-card class="admin-card" routerLink="/atendimento">
          <ion-card-content>
          <ion-card-header>
            <ion-card-title>ğŸ‘¥ Atendimentos </ion-card-title>
          </ion-card-header>
          </ion-card-content>
          <ion-card-content>
            Gerencie agendamentos e atendimentos.
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12" size-md="6" *ngIf="canAccessGestaoProfissionais()">
        <ion-card class="admin-card" routerLink="/gestao-profissionais">
          <ion-card-header>
            <ion-card-title>ğŸ‘¥ GestÃ£o de Profissionais</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Gerencie profissionais e suas competÃªncias.
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12" size-md="6">
        <ion-card class="admin-card" routerLink="/agendamentos-admin">
          <ion-card-header>
            <ion-card-title>ğŸ“… Agendamentos</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Visualize e gerencie todos os agendamentos.
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- ServiÃ§os para usuÃ¡rios nÃ£o autenticados -->
  <ion-grid *ngIf="!isAuthenticated">
    <ion-row>
      <ion-col size="12" size-md="6">
        <ion-card class="custom-card" routerLink="/agendamentos" [queryParams]="{ service: 'cilios' }">
          <img src="assets/img/cilios.jpg" alt="Alongamento de CÃ­lios" class="img-card"/>
          <ion-card-header>
            <ion-card-title>ğŸ‘ï¸ Alongamento de CÃ­lios</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Realce seu olhar com tÃ©cnicas modernas e personalizadas.
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12" size-md="6">
        <ion-card class="custom-card" routerLink="/agendamentos" [queryParams]="{ service: 'labios' }">
          <img src="assets/img/labios.jpg" alt="Design de LÃ¡bios" class="img-card"/>
          <ion-card-header>
            <ion-card-title>ğŸ’„ Design de LÃ¡bios</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Procedimentos para realÃ§ar sua beleza natural com elegÃ¢ncia.
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12">
        <ion-card class="custom-card">
          <img src="assets/img/cursos.jpg" alt="Cursos de EstÃ©tica" class="img-card"/>
          <ion-card-header>
            <ion-card-title>ğŸ“š Cursos Profissionalizantes</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            Aprenda com especialistas e conquiste sua independÃªncia financeira.
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
  </div>
</ion-content>
